# Rocket Game Launcher. Руководство пользователя. 
## v2.0

## Краткое описание
Программа предназначена для запуска игр и настройки параметров из конфигурационных файлов игры. В первую очередь программа будет интересна тем, кто занимается разработкой сборок на основе какой-либо игры. Разрабатывалась для сборки **Oblivion Association** на основе **TES4: Oblivion**, затем была доработана для использования с другими играми. Присутствует поддержка Mod Organizer версии 1 и 2.

## Основные возможности
Программа имеет следующие основные возможности:
- Запуск приложений с указанием параметров(аргументов) запуска.
- Управление параметрами из конфигурационных `.ini` и `.xml` файлов с помощью UI элементов (селектов, ползунков и т.д.).
- Создание и управление бэкапами конфигурационных файлов, параметры которых используются для редактирования в программе.
- Изменение профиля Mod Organizer.

## Установка
Программа является портативной (portable) и не требует установки. Просто скопируйте папку **Rocket Game Launcher** в корневую (важно!) папку игры.

## Интерфейс
Интерфейс программы состоит из двух основных окон: **`Окна пользователя`** и **`Окна разработчика`**.

## Окно пользователя
Содержит два основных экрана: *`Главный экран`* и *`Экран игровых настроек`*. На главном экране осуществляется запуск игры\приложений, а так же переход к пользовательским настройкам приложения, экрану игровых настроек и окну разработчика.

### Главный экран
![Главный экран](https://live.staticflickr.com/65535/52284552629_667e94471d_o.jpg)

На главном экране располагается панель навигации, где отображаются кнопка запуска игры (**`1`**), пользовательские кнопки (**`2`**), если они были добавлены в конфигурационный файл программы (о конфигурационных файлах информация ниже), кнопка перехода на экран настроек игры (**`3`**), если настройки были добавлены в конфигурационный файл игровых настроек, кнопка пользовательских настроек программы (**`4`**), кнопка открытия окна разработчика (**`5`**) и кнопка информации о программе (**`7`**).

Помимо этого в заголовке окна программы есть блок (**`6`**), в котором будет отображаться текст, заданный в конфигурационном файле программы как имя игры.

Кнопка "Играть" (**`1`**) запускает игру\приложение. Вы можете настроить путь к приложению и заголовок кнопки. При нажатии на кнопку "Настройки" (**`2`**) будет произведен переход на экран игровых настроек. Если созданы группы игровых настроек, откроется группа, записанная первой в списке. Кнопка пользовательских настроек (**`4`**) откроет модальное окно настроек программы. Доступны следующие настройки:
1. *`Тема`*. Изменяет тему оформления. Подробнее о темах и изменении оформления в соответствующем разделе ниже).
2. *`Автозакрытие программы при старте игры`*. Если включено, программа автоматически закрывается после запуска игры по кнопке "Играть".

### Экран игровых настроек
![Экран настроек](https://live.staticflickr.com/65535/52285179825_d839602699_o.jpg)

Экран настроек содержит:
* *Навигацию по группам настроек* (**`1`**)
* *Переключатель профиля Mod Organizer* (**`2`**)
* *Список опций текущей группы настроек* (**`3`**)
* *Кнопки управления опциями и бэкапами* (**`4`**)

Наигация по группам настроек (**`1`**) отображает вкладки для перехода между группами настроек, если группы были созданы. Иначе здесь будет только кнопка "Назад" для перехода на главный экран.

Переключатель МО (**`2`**) изменяет текущий профиль. Данные записываются в файл `ModOrganizer.ini`. При изменении профиля обновляются значения опций, которые привязаны к параметрам из файлов, располагающихся в папке текущего профиля МО.

Список опций (**`3`**) содержит контроллеры для управления опциями. Подробная нформация о контроллерах в соответствующем разделе ниже.

Блок кнопок управления (**`4`**) состоит из пяти кнопок:
* `Сохранить`. Записывает изменения параметров в файл.
* `Сбросить`. Сбрасывает значения измененнных опций, возвращая их значения к значениям из связанных параметров. При сохранении изменений стандартное значение изменится на сохраненное, и сброс будет осуществляться на это новое значение.
* `Обновить`. Перезагружает окно настроек и считывает данные из конфигурационного файла `settings.json` и привязанных к опциям файлов игровых настроек, тем самым обновляя список опций и их значений, а так же профили Mod Organizer.
* `Создать бэкап`. Создает бэкап файлов, параметры из которых использованы в опциях.
* `Бэкапы`. Открывает окно бэкапов.

### Бэкапы
![Окно бэкапов](https://live.staticflickr.com/65535/52283753807_d2b497b4f5_o.jpg)

В программе предусмотрена возможность создания бэкапов файлов, параметры из которых использованы в опциях. Бэкапы создаются нажатием кнопки `Создать бэкап` на экране игровых настроек, а так же в модальном окне бэкапов.
В верхней части окна бэкапов будет отображен список доступных бэкапов либо сообщение об их отсутствии (**`1`**). Рядом с именем бэкапа находится кнопки переименования и удаления данного бэкапа. Каждый элемент списка представляет собой раскрывающийся список, который содержит файлы данного бэкапа (**`2`**). Вы можете выбрать все или несколько файлов, и восстановить их из бэкапа, нажав кнопку `Восстановить выбранное`. Если нажать на путь к файлу, строка которого расположена под заголовком файла бэкапа, то откроется папка, где расположен оригинальный файл. Ниже расположен блок кнопок. Кнопка `Создать бэкап` создает новый бэкап файлов, `Обновить` обновляет список бэкапов. `Открыть папку с бэкапами` откроет папку с *game_settings_files*, расположенную в папке *backups*, которая располагается к корневой папке программы и хранит все бэкапы. Кнопка `Отмена` закроет окно бэкапов.

## Окно разработчика
Окно разработчика предназначено для настройки конфигурационного файла программы `config.json` и конфигурационного файла игровых настроек `settings.json` с помощью графического интерфейса. Можно настраивать эти файлы вручную, но рекомендуется пользоваться окном разработчика во избежание ошибок.

> Если вы предпочетаете ручную настройку, то для комфортной работы с конфигурационными файлами программы настоятельно рекомендуется использовать текстовые редакторы с подсветкой синтаксиса, например, NotePad++. От себя лично рекомендую использовать [VS Code](https://code.visualstudio.com/).

<br>

### Вкладка настроек конфигурационного файла программы.
![Окно разработчика](https://live.staticflickr.com/65535/52284822428_c4e074fb7b_o.jpg)
### Вкладка настроек конфигурационного файла игровых настроек.
![Окно разработчика](https://live.staticflickr.com/65535/52283983487_2d209cab9b_o.jpg)

Окно разработчика состоит из панели навигации(**`1`**), блока кнопок управления состоянием текущей конфигурации (**`2`**) и блока опций (**`3`**).

С помощью панели навигации (**`1`**) осуществляется переключение между настройками конфигурационного файла программы (вкладка `Конфигурация`) и конфигурационного файла игровых настроек (вкладка `Игровые настройки`).

Блок кнопок состояния конфигурации (**`2`**) имеет 4 или 5 кнопок:
* `ОК`. Записывает изменения в файл и закрывает окно разработчика.
* `Отмена`. Сбрасывает все изменения и закрывает окно разработчика.
* `Сохранить`. Записывает изменения в файл.
* `Сбросить`. Сбрасывает все изменения.
* `Обновить`. Доступна только во вкладке `Игровые настройки`. Считывает данные из файлов, используемых в опциях игровых настроек.

В блоке опций (**`3`**) располагаются контроллеры для настройки конфигурации. Доступные опции зависят от того, какая вкладка открыта в данный момент.

### Вкладка Конфигурация
Здесь расположены основные настройки программы. Содержит две основные группы настроек: `Настройки окна программы` и `Настройки путей и запуска программ`. 

Группа **`Настройки окна программы`** отвечает за настройки окна пользователя.

![Настройки окна пользователя](https://live.staticflickr.com/65535/52284117597_338cea5889_o.jpg)

Доступные опции:
* `Заголовок окна`. Задает текст, который будет отображаться в заголовке окна. Например, можно указать название игры\сборки. Так же этот текст будет являться именем для окна пользователя в панели задач Windows.
* `Изменяемый размер окна`. Определяет, может ли пользователья изменять размеры окна путем растягивания за края рамки. Если отключено, то окно всегда будет фиксированного размера.
* `Ширина по умолчанию`. Определяет высоту окна в пикселях. Если опция `Изменяемый размер окна` выключена, то задает фиксированную ширину окна, если опция включена, то задает начальную ширину.
* `Высота по умолчанию`. Аналогична ширине, но настраивает высоту окна.
* `Минимальная ширина`. Доступна только при включенной опции `Изменяемый размер окна`. Задает минимальную ширину в пикселях, меньше которой пользователь не может ее изменить. Минимально допустимое значение - **300**.
* `Минимальная высота`. Аналогична ширине, но настраивает минимальную высоту окна.
* `Максимальная ширина`. Доступна только при включенной опции `Изменяемый размер окна`. Задает максимальную ширину в пикселях, больше которой пользователь не может ее изменить. Если указан **0**, то ограничений нет.
* `Максимальная высота`. Аналогична ширине, но настраивает максимальную высоту окна.

Группа **`Настройки путей и запуска программ`** отвечает за настройки путей к основным папкам и файлам, а так же отвечает за настройку запуска дополнителых программ. Эту группу можно разделить на две подгруппы: настройку путей и настройку дополнительных кнопок запуска. В первой подгруппе доступны следующие опции:
* `Папка файлов игры в Documents`. Задает путь к папке файлов игры, которая располагается по пути *~User/Documents/Папка_игры*. Если не используется, поле можно оставить пустым.
* `Изменяемый размер окна`. Определяет, может ли пользователья изменять размеры окна путем растягивания за края рамки. Если отключено, то окно всегда будет фиксированного размера.
* `Ширина по умолчанию`. Определяет высоту окна в пикселях. Если опция `Изменяемый размер окна` выключена, то задает фиксированную ширину окна, если опция включена, то задает начальную ширину.
* `Высота по умолчанию`. Аналогична ширине, но настраивает высоту окна.
* `Минимальная ширина`. Доступна только при включенной опции `Изменяемый размер окна`. Задает минимальную ширину в пикселях, меньше которой пользователь не может ее изменить. Минимально допустимое значение - **300**.
* `Минимальная высота`. Аналогична ширине, но настраивает минимальную высоту окна.
* `Максимальная ширина`. Доступна только при включенной опции `Изменяемый размер окна`. Задает максимальную ширину в пикселях, больше которой пользователь не может ее изменить. Если указан **0**, то ограничений нет.
* `Максимальная высота`. Аналогична ширине, но настраивает максимальную высоту окна.

Кнопки для их запуска располагаются на экране пользователя сразу за кнопкой запуска игры.


![Настройки запуска программ](https://live.staticflickr.com/65535/52285126108_73bcaa87d5_o.jpg)

### Переменные путей
В программе используются переменные путей для упрощения работы с конфигурационными файлами. Эти переменные могут использоваться в `config.json` и `settings.json` в путях к папкам и файлам. Заранее предопределены **пять** переменных, одна из которых доступна всегда, три других зависят от указанных параметров в `config.json`.
1. **%GAME_DIR%**. Доступна всегда. Путь до папки с игрой.
2. **%DOCUMENTS%**. Путь до папки Documents в папке пользователя ОС. Доступна, если в `config.json` указано значение в поле ***documentsPath***.
3. **%MO_DIR%**. Путь до папки Mod Organizer. Доступна, если используется МО, т.е. в `config.json` в объекте **modOrganizer** значение поля ***isUsed*** равно *true*.
4. **%MO_MODS%**. Путь до папки модов Mod Organizer. Доступна, если используется МО, т.е. в `config.json` в объекте **modOrganizer** значение поля ***isUsed*** равно *true*.
5. **%MO_PROFILE%**. Путь до папки текущего профиля Mod Organizer. Доступна, если используется МО, т.е. в `config.json` в объекте **modOrganizer** значение поля ***isUsed*** равно *true*.

Допустим, игра установлена по следующему пути: *D:\Games\Oblivion*. Тогда переменная **%GAME_DIR%** будет иметь значение этого пути. Если ипользуется Mod Organizer, то переменная **%MO_DIR%** будет иметь путь *D:\Games\Oblivion\\{имя_папки_МО}*, **%MO_PROFILE%** будет иметь путь *D:\Games\Oblivion\\{имя_папки_МО}\profiles\\{имя_профиля_МО}*.

Значение переменной **%DOCUMENTS%**, если в ***documentsPath*** указано *MyGames\\\\Oblivion*, будет иметь значение *{системный_диск}\Users\{имя_пользователя}\Documents\MyGames\Oblivion*

Если создана переменная **%DATA%**, со значением *Data\\\\OBSE\\\\Plugins*, что эквивалентно *%GAME_DIR%\\\\Data\\\\OBSE\\\\Plugins* то итоговое значение ее пути будет *D:\Games\Oblivion\Data\OBSE\Plugins*.

> Все пути, в переменных и значениях других полей, пишутся с двойным обратным слешем, например *Data\\\\OBSE\\\\Plugins*. Это связано с системой обработки строк. Обратный слэш (**\\**) является спецсимволом, и в строках должен экранироваться, иначе будет проигнорирован, и в итоге получится некорректный путь. При использовании текстового редактора с подсветкой синтаксиса вы увидите ошибку, если **\\** не будет экранирован.

> О кириллице в путях. Настоятельно рекомендуется **не использовать** в путях кириллицу (буквы русского алфавита). Некоторые программы имеют проблемы с такими путями. Это не требование конкретно этой программы, это общая рекомендация, которая относится к любой программе.

## Настройка
Программа имеет два основных конфигурационных файла: `config.json` и `settings.json`.

### config.json
Файл `config.json` - основной конфигурационный файл программы. Содержит в себе настройки размеров окна, настройку параметров Mod Organizer, пути к исполняемым программам. 

Порядок полей может быть произвольным. Все поля опциональные. Однако рекомендуется до первого запуска указывать в объекте ***playButton*** поле ***path***.

```js
{
  // Определяет, можно ли изменять размер окна.
  // Тип: булево значение.
  // По умолчанию: false.
  "isResizable": false,

  // Определяет минимальное значение ширины окна программы в пикселях.
  // Игнорируется, если `isResizable` в значении false.
  // Тип: число.
  // По умолчанию: 0 (нет ограничений).
  "minWidth": 400,

  // Определяет минимальное значение высоты окна программы в пикселях.
  // Игнорируется, если `isResizable` в значении false.
  // Тип: число.
  // По умолчанию: 0 (нет ограничений).
  "minHeight": 400,

  // Определяет ширину окна программы в пикселях.
  // Если `isResizable` = false, то это значение ширины будет постоянным.
  // Если `isResizable` = true, то это значение ширины до первого его изменения.
  // Тип: число.
  // По умолчанию: 800.
  "width": 800,

  // Определяет высоту окна программы в пикселях.
  // Если `isResizable` = false, то это значение высоты будет постоянным.
  // Если `isResizable` = true, то это значение высоты до первого его изменения.
  // Тип: число.
  // По умолчанию: 600.
  "height": 600,

  // Определяет максимальное значение ширины окна программы в пикселях.
  // Игнорируется, если `isResizable` в значении false.
  // Тип: число.
  // По умолчанию: 0 (нет ограничений).
  "maxWidth": 0,

  // Определяет максимальное значение высоты окна программы в пикселях.
  // Игнорируется, если `isResizable` в значении false.
  // Тип: число.
  // По умолчанию: 0 (нет ограничений).
  "maxHeight": 0,

  // Настройки для Mod Organizer.
  // Определяют, используется ли МО, его версия и путь до папки МО.
  // Тип: объект.
  // По умолчанию: { isUsed: true }.
  "modOrganizer": {
    // Используется ли МО.
    // Тип: булево значение.
    // По умолчанию: false.
    // Обязательное поле.
    "isUsed": true,

    // Версия МО.
    // Тип: число.
    // По умолчанию: 2.
    // Доступные значения: 1, 2.
    "version": 2,

    // Путь до папки МО.
    // Тип: строка.
    // По умолчанию: "Mod Organizer".
    "pathToMOFolder": "MO2"
  },

  // Путь до папки игровых файлов в папке Documents пользователя Windows.
  // Тип: строка.
  // По умолчанию: "" (пустая строка).
  "documentsPath": "My Games\\Oblivion",
  
  // Название игры. Будет отображаться в заголовке окна программы.
  // Тип: строка.
  // По умолчанию: "" (пустая строка).
  "gameName": "Oblivion Association",

  // Настройка поведения кнопки запуска игры.
  // Тип: объект.
  // Обязательное поле.
  "playButton": {
    // Путь до исполняемого файла игры. `.exe` или `.lnk`(ярлык).
    // Тип: строка.
    // По умолчанию: "" (пустая строка).
    "path": "Oblivion.exe",

    // Параметры запуска приложения.
    // Игнорируются, если в `path` указан путь до ярлыка (.lnk).
    // Тип: массив строк.
    // По умолчанию: [] (пустой массив).
    "args": [
      "-editor"
    ],

    // Заголовок, отображаемый на кнопке запуска игры.
    // Тип: строка.
    // По умолчанию: "" (пустая строка).
    // Допустимо искользовать кириллицу.
    "label": ""
  },

  // Определяет, какие доп. программы либо папки можно запускать\открывать через программу.
  // Будут выводиться в виде кнопок на главном экране программы.
  // Тип: массив объектов.
  // По умолчанию: [] (пустой массив).
  "customButtons": [
    {
      // Определяет путь до файла\папки.
      // Тип: строка.
      // Обязательное поле.
      "path": "%GAME_DIR%\\Editor.lnk",

      // Параметры запуска приложения.
      // Тип: массив строк.
      // По умолчанию: [] (пустой массив).
      "args": [],

      // Заголовок кнопки.
      // Тип: строка.
      // По умолчанию: "" (пустая строка).
      // Допустимо искользовать кириллицу.
      // Обязательное поле.
      "label": "CSE"
    }
  ]
}
```

Более подробно остановимся на полях ***playButton*** и ***customButtons***. 

***playButton*** определяет то, какой исполняемый файл будет запускаться по кнопке "Играть" (если не указано поле ***label***, то это будет стандартный заголовок кнопки). Значением может быть путь до `.exe` или `.lnk` файла. От расширения файла зависит, какие  аргументы запуска можно передать. Если для запуска игры не требуется каких-либо особых условий, то нет принципиального значения, какой файл для запуска будет указан. Однако в более сложных случаях возможностей запуска через ярлык может быть недостаточно ввиду его ограничений. Основное - это сохранение пути в поле "Объект" в свойствах ярлыка. Если он был прописан, то он всегда будет таким, как при создании, и если у пользователя игра будет установлена на другой диск, то будет ошибка. Поэтому в данном случае следует указывать путь до `.exe` файла, а параметры запуска передавать через поле ***args***.

Рассмотрим на примере Mod Organizer 1. При его использовании игру следует запускать через него, иначе игра не увидит установленные плагины. Для облегчения запуска игры и приложений, работающих с модами, в МО можно создать ярлыки. Поле "Объект" в ярлыке для запуска игры будет выглядеть следующим образом: *"D:\Games\Oblivion\Mod Organizer\ModOrganizer.exe" "D:\Games\Oblivion\Oblivion.exe".exe"*. И если этот ярлык запустить на другом ПК, где другая иерархия папок, то игра не запустится.

В таких случаях нужно прописывать запуск через `.exe`. Для этого в поле ***path*** пишем путь до `.exe`. Добавление ***%GAME_DIR%*** в ***path*** не обязательно, т.к., по умолчанию, все пути начинают отсчет от папки игры.

> Однако, в агрументах путь до файла/папки **ОБЯЗАТЕЛЬНО** должен начинаться с ***%GAME_DIR%***, иначе аргумент будет распознан как обычная строка, а не путь.

В поле ***args*** добавляем нужные аргументы. Для случая с Mod Organizer итоговая запись будет выглядеть так:

```js
{
  "path": "%MO_DIR%\\ModOrganizer.exe",
  "args": ["%GAME_DIR%\\Oblivion.exe"],
  "label": "Любое_Имя_Для_Кнопки"
}
```
Если нужно добавить еще какой-либо параметр, то пишем его через запятую:
```js
"args": ["%GAME_DIR%\\Oblivion.exe", "-editor"],
```
Аналогичный подход используется и для ***customButtons***. Отличие лишь в том, что это массив объектов, каждый элемент которого - описание для кнопки.
```js
"customButtons": [
  {
    "path": "%MO_DIR%",
    // или "path": "Mod Organizer", что равнозначно, но рекомендуется использовать переменную.
    "label": "Открыть папку МО"
  },
  {
    "path": "%MO_DIR%\\ModOrganizer.exe",
    "args": ["%GAME_DIR%\\obse_loader.exe", "-editor"],
    "label": "Construction Set Extender"
  },
  {
    "path": "%GAME_DIR%",
    "label": "Открыть папку игры"
  },
  {
    // Так же допускается использование своих кастомных путей, если такие созданы.
    "path": "%MY_PATH_VARIABLE%\\AnyProgram.lnk",
    // В случае использования `.lnk` параметры в "args" игнорируются и используются параметры из ярлыка.
    "args": [],
    "label": "Какое-то приложение"
  }
],
```

### settings.json
Файл `settings.json` отвечает за вывод на экран настроек опций игры, основанных на параметрах из конфигурационных файлов игры. Конфигурационные файлы - это файлы с расширением `.ini`, `.xml` и другие, которые имеют схожую с ними структуру содержимого, проще говоря текст. О расширениях файлов и их структуре более подробно будет описано ниже. Конфигурационными файлами чаще всего являются файлы из модов(плагинов), которые отвечают за регулировку работы мода. Но так же это могут быть и встроенные конфигурационные файлы игры, доступные для редактирования, такие как `oblivion.ini`.

Пример настроек файла `settings.json` вы можете посмотреть в папке *help* в файле `example_settings.json`.

Имеет три основных поля:

```js
{
  // Доступные группы для параметров.
  // Тип: массив объектов.
  // По умолчанию: [] (пустой массив).
  "gameSettingsGroups": [
    {
      // Техническое название группы.
      // Служит для определения принадлежности параметров к группам.
      // Значение не должно поваторяться в других группах.
      // Тип: строка.
      // Обязательное поле.
      "name": "Graphic",

      // Заголовок для вкладки на экране настроек.
      // Тип: строка.
      // По умолчанию: значение поля "name".
      // Допустимо искользовать кириллицу.
      "label": "Графика"
    }
  ],

  // Базовая кодировка для конфигурационных файлов игры.
  // Тип: строка.
  // По умолчанию: "win1251".
  "baseFilesEncoding": "win1251",

  // Описание используемых конфигурационных файлов игры и параметров из них.
  // Тип: объект.
  // Обязательное поле.
  "gameSettingsFiles": {}
}
```
Поле ***gameSettingsGroups*** отвечает за то, какие группы настроек будут доступны в программе. Группы служат для объединения выводимых на экран параметров, что повышает удобство поиска нужных. Количество групп может быть любым. При переключении вкладок будут отображены только те параметры, у которых указана та же самая группа. Если группы не созданы, все параметры будут отображены в общем списке.

Поле ***baseFilesEncoding*** определяет базовую кодировку конфигурационных файлов игры. Она будет использована, если для файла не указана своя. По умолчанию используется "win1251" - кодировка с поддержкой кириллицы. Если при изменении параметров какого-либо файла через программу в этом файле вместо читаемых слов появились непонятные символы, значит выбрана неверная кодировка для файла. Все доступные кодировки вы можете посмотреть [здесь](https://github.com/ashtuchkin/iconv-lite/wiki/Supported-Encodings).

Поле ***gameSettingsFiles*** отвечает за описание используемых для редактирования в программе параметров из конфигурационных файлов игры, а так же самого файла, откуда взяты параметры. Представляет собой объект, в котором все ключи должны быть уникальными. Этот объект содержит в себе другие объекты. Каждый отдельный файл, используемый в программе, это отдельный объект. Рекомендуется (но это не обязательно) называть ключи по шаблону *имя_файла.расширение_файла* в CamelCase нотации. Например:

```js
  "OblivionIni": {},
  "SomeFileXml": {}
```
Каждый объект файла содержит четыре основных поля:
```js
{
  // Путь к файлу.
  // Тип: строка.
  // Обязательное поле.
  "path": "oblivion.ini",

  // Вид содержимого файла (об этом ниже).
  // Тип: строка.
  // Доступные значения: "sectional", "line", "tag".
  // Обязательное поле.
  "view": "sectional",

  // Кодировка текущего файла.
  // Тип: строка.
  // Доступные значения: см. ***baseFilesEncoding***
  "encoding": "utf-8",

  // Список опций, генерируемых на основе параметров из файла.
  // Тип: массив объектов.
  // Обязательное поле.
  "optionsList": [
}
```

Поле ***path*** содержит в себе путь к файлу. Пути начинают отсчет от корневой папки игры, если не указана переменная пути.

Если файл, из которого требуется взять настройки, находится в папке файлов, расположенной в Documents пользователя, то путь должен начинаться с **%DOCUMENTS%**.
```js
  "path": "%DOCUMENTS%\\oblivion.ini",
```
Аналогично с файлами из папки профиля Mod Organizer. Путь к этим файлам должен начинаться с **%MO_PROFILE%**.
```js
  "path": "%MO_PROFILE%\\oblivion.ini",
```
Имя папки профиля определяется автоматически по активному профилю в `ModOrganizer.ini`. Активный профиль МО можно изменить в программе.

Поле ***view*** задается в соответствии со структурой содержимого файла. Поддерживается три вида структур, которые программа может обрабатывать: *line*, *sectional* и *tag*.

Структура *line* используется в `.ini` файлах и представляет собой последовательность строк вида:
```ini
set имя_параметра to значение_параметра
```
Пример такого файла - `Maskar Oblivion Overhaul.ini`.

Структура *sectional* это классическая структура для `.ini` файла. Имеет вид:
```ini
[имя_группы]
имя_параметра=значение_параметра
```
Пример такого файла - `oblovion.ini`.

Структура *tag* это структура, идентичная таковой из `.xml` файлов. 
```xml
<Section>
  <Data Value="5" />
</Section>
```
Пример такого файла это любой файл с расширением `.xml`. Касательно Oblivion, подобную структуру имеет конфигурационный файл `OblivionReloaded.dll.config`.

> Исходя из вышеописанного, поле ***view*** заполняется в соответствии со структурой содержимого файла, а не его расширением.

Поле ***encoding*** определяет кодировку для текущего файла, если она отличается от базовой. Доступные значения, а так же информацию о кодировках, см. в ***baseFilesEncoding***. 

Поле ***optionsList*** описывает доступные для редактирования опции на экране настроек. Каждая опция представляет собой UI контроллер или группу контроллеров, с помощью которых происходит редактирование. Контроллеры отличаются внешним видом и перечнем доступных для них настроек. Вы сами выбираете нужный вам контроллер исходя из типа и значения изменяемого параметра в конфигурационном файле игры, к которому принадлежит параметр.

Контроллеры бывают четырех типов: 
1. *Чекбокс (checkbox)*.

 ![checkbox](https://live.staticflickr.com/65535/51533349072_cdcc1cd43e_t.jpg)
 
  Имеет два значения, либо 1 (отмечен), либо 0 (не отмечен). Не имеет дополнительных настроек.
```js
"controllerType": "checkbox",
```
2. *Переключатель (switcher)*.

 ![switcher](https://live.staticflickr.com/65535/51534070501_50321162d5_t.jpg)
 
  Имеет два значения, либо 1 (сдвинут вправо), либо 0 (сдвинут влево). Не имеет дополнительных настроек.
```js
"controllerType": "switcher",
```
3. *Ползунок (range)*. 

![range](https://live.staticflickr.com/65535/51534070471_77374532be_m.jpg)

Значение задается диапазоном доступных значений. Имеет три доп. настройки, которые задают диапазон значений, а так же шаг изменения значения.
```js
"controllerType": "range",
// Минимальное значение диапазона.
// Тип: число либо строка, представляющая число.
// Обязательное поле.
"min": 0,

// Максимальное значение диапазона.
// Тип: число либо строка, представляющая число.
// Обязательное поле.
"max": 8,

// Шаг изменения значения.
// Тип: число либо строка, представляющая число.
// Обязательное поле.
"step": 1,
```
Кнопки + и - изменяют значение на один шаг вверх или вниз соответственно. В правой части указано текущее значение. 

Если значением поля ***step*** является число с плавающей запятой, то кол-во знаков после запятой в новом значении параметра, которым управляет контроллер, определяется количеством этих знаков из исходного значения параметра из конфигурационного файла этого параметра, если это значение изначально было числм с плавающей запятой. В противном случае к исходному значению добавится кол-во знаков, равное таковому у значения ***step***.

> Имейте это ввиду при установке ***step***, т.к. для некоторых параметров изменение типа числа может быть критичным, что в дальнейшем может вызвать ошибки в работе игры\мода.

4. *Выпадающий список (select)*.

![select](https://live.staticflickr.com/65535/51535002070_07006c158e_m.jpg)
 
Значение задается списком опций. Имеет одну доп. настройку, которая задает список доступных значений для выбора.
```js
"controllerType": "select",
// Определяет список значений в выпадающем списке.
// Тип: объект.
// По умолчанию: { "none": "None" }.
// Обязательное поле.
"options": {
  // Ключем поля является значение, которое будет записано в файл.
  // Тип: строка.
  // Значением поля является заголовок, выводимый для данной опции в выпадающем списке.
  // Тип: строка.
  // Допустимо искользовать кириллицу.
  "56": "Alt"
}
``` 

***optionsList***  представляет собой массив, каждый элемент которого объект с описанием опции. Доступные поля для настройки опции зависят от ее типа и типа содержимого конфигурационного файла (поле ***view***), на котором основана опция.

Каждая опция имеет **три** общих для всех опций поля: ***name***, ***label***, ***description*** и ***settingGroup*** (при условии, что в ***gameSettingsGroups*** были добавлены группы).

Поле ***name*** соответствует имени параметра из конфигурационного файла, содержащего этот параметр.

> Значение поля ***name***, указанное в `settings.json` для опции, и имя параметра из конфигурационного файла **ДОЛЖНЫ СОВПАДАТЬ**. Именно по имени параметра происходит поиск значения в файле для опции.

> В зависимости от типа опции, положение поля ***name*** может меняться (об этом ниже).

Поле ***label*** задает заголовок для опции, который будет находится рядом с контроллером опции на экране настроек. Допускается использование кириллицы.

Поле ***description*** задает текст подсказки для опции, который будет отображаться во вспывающем окне рядом с заголовком опции при наведении на иконку подсказки. Необязательное поле. Если не указано, иконка подсказки для опции отображаться не будет. Допускается использование кириллицы.

Поле ***settingGroup*** определяет принадлежность опции к группе настроек, если эти группы были созданы. Значение этого поля должно соответствовать значению поля ***name*** одного из элементов массива ***gameSettingsGroups***. Если группы не созданы, ***settingGroup*** указывать не следует.

```js
  "name": "bFullScreen", // Обязательное поле.
  "label": "Полный экран вкл\откл.", // Обязательное поле.
  "settingGroup": "Graphic" // Обязательное поле, если указаны `gameSettingsGroups`
```

### Типы содержимого файла

Тип содержимого файла (поле ***view***) задает доп. требования к настройке опции.
* *line* не имеет индивидуальных настроек. 
* *sectional* имеет обязателное поле ***iniGroup***, в котором указывается группа, к которой в `.ini` файле находится параметр, на котором основана опция.
Для файла с содержимым вида:
```ini
[General]
param=value
param1=value
[Display]
param2=value
```
и используемом для опции параметром *param2* в ***iniGroup*** пишем:
```js
  "name": "param2",
  "label": "Полный экран вкл\откл."
  "iniGroup": "Display"
``` 
* *tag* имеет два допонительных поля настроек, помимо оьщего поля ***name***. В нем пишется имя тэга-параметра.
```js
  "name": "Filtration",
  "valueAttribute": "Value",
  "valuePath": "Main/Misc",
```
***valueAttribute*** это имя аттрибута параметра, если нужно значение одного из атрибутов тэга с параметром, либо, если нужно значение самого тэга, здесь нужно прописать "#text" или оставить пустую строку "".
```js
  "valueAttribute": "Value",
  // или
  "valueAttribute": "#text",
```
***valuePath*** это путь до нужного тэга-параметра. Само имя параметра не указывается, оно указывается в поле ***name***.
Для файла с содержимым вида:
```ini
<Main>
  <Some>
    <ParamTag Value="3" />
  </Some>
</Main>
```
и используемом для опции значением аттрибута *Value* параметра *ParamTag* пишем:
```js
  "name": "ParamTag",
  "valueAttribute": "Value",
  "valuePath": "Main/Some",
``` 
Для значения самого тэга-параметра:
```js
  "name": "ParamTag",
  "valueAttribute": "#text",
  "valuePath": "Main/Some",
```

### Типы опций

Опции бывают **четырех** типов: *обычные*, *связанные*, *комбинированные* и *групповые*. От типа опции зависит кол-во регулируемых опцией параметров из файла, а так же кол-во UI контроллеров для опции и доступный их тип.

* *Обычная (default)* опция регулирует один параметр из конфигурационного файла. Состоит из одного UI контроллера. Доступны все типы контроллеров.
* *Групповая (group)* опция регулирует любое кол-во параметров из конфигурационного файла. Состоит из одного UI контроллера. Доступны все типы контроллеров.
* *Связанная (related)* опция регулирует два параметра из конфигурационного файла. Состоит из двух UI контроллеров. Доступный тип контроллера: *select*.
* *Комбинированная (combined)* опция регулирует два параметра из конфигурационного файла. Состоит из одного UI контроллера. Доступный тип контроллера: *select*.

### Обычная (default)

Стандартный тип. Управляет одним параметром из файла. Поддерживает все виды контроллеров. Типичная опция этого типа для файла с ***view*** *line* и контроллером *checkbox* имеет вид:
```js
"optionsList": [
  {
    "optionType": "default",
    "settingGroup": "Graphic",
    "label": "Параметр для чего-то"
    "name": "CheckOverrideSourceType",
    "iniGroup": "EquipmentOverride",
    "controllerType": "checkbox",
  }
]
```

### Групповая (group)

Опция данного типа имеет один общий контроллер и изменяет несколько параметров из файла на одно общее значение. Ее особенностью (и двух оставшихся) является то, что она имеет поле ***items***, в котором прописываются настройки для параметров из конфигурационного файла, использованных в опции. Поле представляет собой массив объектов, каждый из которых описывает один из используемых параметров. Список полей зависит от типа содержимого файла (поля ***view***).

Для файла с ***view*** *sectional* и контроллером *range* имеет вид:
```js
"optionsList": [
  {
    "optionType": "group",
    "settingGroup": "Weight",
    "label": "Параметр для чего-то"
    "description": "Эта опция делает какие-то важные вещи.",
    "controllerType": "range",
    "min": 0,
    "max": 5,
    "step": 0.5,
    "items": [
      {
        "name": "armorWeightLimit",
        "iniGroup": "Armor",
      },
      {
        "name": "weaponWeightLimit",
        "iniGroup": "Weapon",
      },
    ],
  }
]
```

Данный тип опции может пригодиться, например, для уствновки одной кнопки на несколько действий.

### Связанная (related)

Опция имеет несколько контроллеров и регулирует несколько параметров. Кол-во контроллеров будет равно кол-ву изменяемых параметров. Каждый элемент массива ***items*** в данной опции помимо данных об изменяемом параметре содержит так же информацию о контроллере, т.к. каждый параметр имеет свой контроллер. Данный тип опции имеет один доступный тип контролеера: *select*.

Для файла с ***view*** *tag* может иметь вид:
```js
"optionsList": {
  "optionType": "related",
  "settingGroup": "Control",
  "label": "Показать информацию об объекте",
  "description": "Изменить комбинацию",
  "items": [
    {
      "name": "KeyModifier1",
      "valueAttribute": "FormIDFinderQuest",
      "valuePath": "Main/Misc",   
      "": "",
      "controllerType": "select",
      "options": {
        "0": "Нет",
        "56": "Left Alt",
        "54": "Right Shift",
        "157": "Right Ctrl"
      }
    },
    {
      "name": "FormIDFinderQuest.KeyPressed1",
      "controllerType": "select",
      "options": {
        "22": "U",
        "23": "I",
        "24": "O",
      }
    }
  ]
}
```

Данный тип опции может пригодиться для установки сочетания клавиш для какого-либо действия (Ctrl+U, Alt+A и т.д.).

### Комбинированная (combined)

Опция имеет один контроллер и регулирует несколько параметров. В отличие от групповой (*group*) опции, комбинированная выставляет для каждого параметра индивидуальное значение. Доступен один тип контроллера: *select*. Данная опция ввиду особенности работы имеет доролнительное необязательное поле настройки: ***separator*** (разделитель). Поле ***items*** это такой же массив параметров из файла, как и в предыдущих типах опций. Принцип работы опции заключается в следующем: список значений для параметра из файла записывается в элемент (поле) ***options*** (это список опций, доступных для выбора в контроллере) в качестве ключа (слева) с разделением этих значений разделителем. Значением поля (справа) будет заголовок для элемента. По умолчанию разделителем является двоеточие (**:**). Если в ключе присутствует двоеточие, нужно изменить значение поля ***separator*** на другое, но чтобы оно так же не присутствовало в ключе, в противном случае получятся неверные данные в опции. При сохраненни значения опции ключ выбранного элемента будет разделен разделителем. Новые значения для параметра запишутся по порядку, слева направо, в элементы (параметр ***items***), сверху вниз.

> Порядок значений в ключе поля ***options*** и порядок параметров в ***items*** должны совпадать, иначе в значения параметров в файле запишутся неверные данные.

Для файла с ***view*** *sectional* опция может имееть вид:
```js
"optionsList": {
  "optionType": "combined",
  "label": "Разрешение экрана",
  "description": "Устанавливает разрешение экрана",
  "controllerType": "select",
  "separator": ":",
  "options": {
    "640:480": "640 x 480",
    "800:600": "800 x 600",
    "1024:768": "1024 x 768"
  },
  "items": [
    {
      "name": "iSize W",
      "iniGroup": "Display"
    },
    {
      "name": "iSize H",
      "iniGroup": "Display"
    }
  ],
}
```

В данном примере при выборе в контроллере опции *"800:600": "800 x 600"*, в параметр "iSize W" запишется *800*, в параметр "iSize Н" запишется *600*.

## Изменение внешнего вида

Вы можете изменить фоновое изображение, а так же цвета, используемые в оформлении программы. Для оформления используются файлы с расширение `.css`. Точно такие же файлы применяются для оформления сайтов. Для этого присутствует папка *themes* в корне программы. В ней изначально присутствует два файла: фоновое изображение (`backround.png`) и файл для пользовательских стилей (`custom_styles.css`).

Для изменения фонового изображения достаточно просто заменить файл `background.png` на другой с таким же именем и расширением. Если расширение нового файла отличается, то в `custom_styles.css` в поле *background-image* следует изменить значение *url* на другое, например: 
```css
background-image: url("./background.jpeg");
```
Так же можно изменить и имя файла.
```css
background-image: url("./new_name.jpeg");
```

Три оставшихся поля отвечают за размер и положение фонового изображения. Подробнее о работе со стилями *css* и, собственно, свойством *background*, вы можете ознакомиться [здесь](https://developer.mozilla.org/ru/docs/Web/CSS/background).

Чтобы изменить цвета оформления, достаточно раскомментировать нужную строку и вписать туда нужное значение цвета. Поддерживаются цвета *hex*, *rgb*, *hsl*.

> На самом деле, кто знаком с веб-технологиями, понимает, что возможности кастомизации шире, чем просто изменение цвета и фона. Но на данный момент не продумана удобная система работы с классами и их стилями. Эта опция на этапе планирования.

Помимо этого можно создавать пользовательские темы, которые будут доступны для выбора в настройках программы. Для этого нужно в папке *themes* создать новую папку, в ней создать файл `styles.css`. Теперь новая тема будет доступна для выбора. В папку темы вы можете добавить новый файл фонового изображения, а содержимое файла `custom_styles.css` скопировать в файл `styles.css`. Затем изменить значение свойства *background-image*, если имя или расширение нового файла отличается, и, допустим, поменять некоторые цвета. Теперь у вас будет доступно две цветовые темы. Затем, при переключении тем в настройках, новое оформление будет применено без перезапуска программы.

> Если вы создаете новую тему, то имейте ввиду, что стили из `custom_styles.css` будут переопределять стили из файла `styles.css` вашей темы. Для предотвращения этого нужно удалить или закомментировать в файле `custom_styles.css` все содержимое или те свойства, которые конфликтуют с вашей темой.

## Ошибки в программе

Общая информация об ошибке выводится в правой нижней части окна программы. Более подробную информацию об ошибке можно посмотреть в файле лога `launcher.log`, который находится в корневой папке программы.
