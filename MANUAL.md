# Rocket Game Launcher. Руководство пользователя

## Краткое описание
Программа предназначена для запуска игр и настройки параметров из конфигурационных файлов игры. В первую очередь программа интересна тем, кто занимается разработкой сборок на основе какой-либо игры. Разрабатывалась для сборки **Oblivion Association** на основе **TES4: Oblivion**, затем была доработана для использования с другими играми. Присутствует поддержка Mod Organizer версии 1 и 2.

## Основные возможности
Программа имеет следующие основные возможности:
- Запуск игры с указанием параметров(аргументов) запуска.
- Запуск других приложений с указанием параметров(аргументов) запуска.
- Управление параметрами из конфигурационных `.ini` и `.xml` файлов с помощью UI элементов (селектов, ползунков и т.д.).
- Создание и управление бэкапами конфигурационных файлов, параметры которых используются для редактирования в программе.
- Изменение профиля Mod Organizer.

## Установка
Программа является портативной (portable) и не требует установки. Просто скопируйте папку **Rocket Game Launcher** в корневую (и только туда) папку с игрой.

## Рекомендации
Для комфортной работы с конфигурационными файлами программы, которые имеют расширение `.json`, настоятельно рекомендуется использовать текстовые редакторы с подсветкой синтаксиса, например, NotePad++. Так как синтаксис этого формата строгий, это убережет от синтаксических ошибок на этапе изменения файлов.

## Переменные путей
В программе используются переменные путей для упрощения работы с конфигурационными файлами. Эти переменные могут использоваться в `config.json` и `settings.json` в путях к папкам и файлам. Заранее предопределены **4** переменных, одна из которых доступна всегда, три других зависят от указанных параметров в `config.json`.
1. **%GAME_DIR%**. Доступна всегда. Путь до папки с игрой.
2. **%DOCUMENTS%**. Путь до папки Documents в папке пользователя ОС. Доступна, если в `config.json` указано значение в поле ***documentsPath***.
3. **%MO_DIR%**. Путь до папки Mod Organizer. Доступна, если используется МО, т.е. в `config.json` в объекте **modOrganizer** значение поля ***isUsed*** равно *true*.
4. **%MO_PROFILE%**. Путь до папки текущего профиля Mod Organizer. Доступна, если используется МО, т.е. в `config.json` в объекте **modOrganizer** значение поля ***isUsed*** равно *true*.

Допустим, игра установлена по следующему пути: *D:\Games\Oblivion*. Тогда переменная **%GAME_DIR%** будет иметь значение этого пути. Если ипользуется Mod Organizer, то переменная **%MO_DIR%** будет иметь путь *D:\Games\Oblivion\\{имя_папки_МО}*, **%MO_PROFILE%** будет иметь путь *D:\Games\Oblivion\\{имя_папки_МО}\profiles\\{имя_профиля_МО}*.

Значение переменной **%DOCUMENTS%**, если в ***documentsPath*** указано *MyGames\\\\Oblivion*, будет иметь значение *{системный_диск}\Users\{имя_пользователя}\Documents\MyGames\Oblivion*

Помимо этого можно создавать свои пути. Для этого предназначено поле **customPaths** в `config.json`. Это объект, у которого ключ - имя переменной, значение - путь до папки. Имена переменных должны иметь вид **%VARIABLE_NAME%**. Пути указываются с отчетом от корневой папки игры.

Если создана переменная **%DATA%**, со значением *Data\\\\OBSE\\\\Plugins*, что эквивалентно *%GAME_DIR%\\\\Data\\\\OBSE\\\\Plugins* то итоговое значение ее пути будет *D:\Games\Oblivion\Data\OBSE\Plugins*.

> Все пути, в переменных и значениях других полей, пишутся с двойным обратным слешем, например *Data\\\\OBSE\\\\Plugins*. Это связано с системой обработки строк. Обратный слэш (**\\**) является спецсимволом, и в строках должен экранироваться, иначе будет проигнорирован, и в итоге получится некорректный путь. При использовании текстового редактора с подсветкой синтаксиса вы увидите ошибку, если **\\** не будет экранирован.

## Настройка
Программа имеет два основных конфигурационных файла: `config.json` и `settings.json`.

### config.json
Файл `config.json` - основной конфигурационный файл программы. Содержит в себе настройки размеров окна, настройку параметров Mod Organizer, пути к исполняемым программам. 
> Конфигурационный файл программы по умолчанию настроен для "чистой" **TES4: Oblivion**.

Порядок полей может быть произвольным. Все поля опциональные, за исключением ***playButton***. Если какое-то из полей представялет собой объект, то вложенные обязательные поля помечены отдельно.

```js
{
  // Определяет, можно ли изменять размер окна.
  // Тип: булево значение.
  // По умолчанию: false.
  "isResizable": false,

  // Определяет минимальное значение ширины окна программы в пикселях.
  // Игнорируется, если `isResizable` в значении false.
  // Тип: число.
  // По умолчанию: 0 (нет ограничений).
  "minWidth": 400,

  // Определяет минимальное значение высоты окна программы в пикселях.
  // Игнорируется, если `isResizable` в значении false.
  // Тип: число.
  // По умолчанию: 0 (нет ограничений).
  "minHeight": 400,

  // Определяет ширину окна программы в пикселях.
  // Если `isResizable` = false, то это значение ширины будет постоянным.
  // Если `isResizable` = true, то это значение ширины до первого его изменения.
  // Тип: число.
  // По умолчанию: 800.
  "width": 800,

  // Определяет высоту окна программы в пикселях.
  // Если `isResizable` = false, то это значение высоты будет постоянным.
  // Если `isResizable` = true, то это значение высоты до первого его изменения.
  // Тип: число.
  // По умолчанию: 600.
  "height": 600,

  // Определяет максимальное значение ширины окна программы в пикселях.
  // Игнорируется, если `isResizable` в значении false.
  // Тип: число.
  // По умолчанию: 0 (нет ограничений).
  "maxWidth": 0,

  // Определяет максимальное значение высоты окна программы в пикселях.
  // Игнорируется, если `isResizable` в значении false.
  // Тип: число.
  // По умолчанию: 0 (нет ограничений).
  "maxHeight": 0,

  // Переменные пользовательских путей. См. раздел "Переменные путей".
  // Тип: объект.
  // По умолчанию: {} (пустой объект).
  "customPaths": {
    "%CUSTOM%": "Data\\OBSE\\Plugins",
  },

  // Настройки для Mod Organizer. Определяют, используется ли МО, его версия и путь до папки МО.
  // Тип: объект.
  // По умолчанию: { isUsed: true }.
  "modOrganizer": {
    // Используется ли МО.
    // Тип: булево значение.
    // По умолчанию: false.
    // Обязательное поле.
    "isUsed": true,

    // Версия МО.
    // Тип: число.
    // По умолчанию: 2.
    // Доступные значения: 1, 2.
    "version": 2,

    // Путь до папки МО.
    // Тип: строка.
    // По умолчанию: "Mod Organizer".
    "path": "MO2"
  },

  // Путь до папки игровых файлов в папке Documents пользователя Windows.
  // Тип: строка.
  // По умолчанию: "" (пустая строка).
  "documentsPath": "My Games\\Oblivion",
  
  // Имя игры. Будет отображаться в заголовке окна программы.
  // Тип: строка.
  // По умолчанию: "" (пустая строка).
  "gameName": "Oblivion Association",

  // Настройка поведения кнопки запуска игры.
  // Тип: объект.
  // Обязательное поле.
  "playButton": {
    // Путь до исполняемого файла игры. `.exe` или `.lnk`(ярлык).
    // Тип: строка.
    // По умолчанию: "" (пустая строка).
    // Обязательное поле.
    "path": "Oblivion.exe",

    // Параметры запуска приложения. Игнорируются, если в `path` указан путь до ярлыка (.lnk).
    // Тип: массив строк.
    // По умолчанию: [] (пустой массив).
    "args": [
      "-editor"
    ],

    // Заголовок, отображаемый на кнопке запуска игры.
    // Тип: строка.
    // По умолчанию: "" (пустая строка).
    "label": ""
  },

  // Определяет, какие доп. программы либо папки можно запускать\открывать через программу. Будут выводиться в виде кнопок на главном экране программы.
  // Тип: массив объектов.
  // По умолчанию: [] (пустой массив).
  "customButtons": [
    {
      // Определяет путь до файла\папки.
      "path": "%GAME_DIR%\\Editor.lnk",
      // Заголовок кнопки.
      "label": "CSE"
    }
  ]
}
```

Более подробно остановимся на полях ***playButton*** и ***customButtons***. 

***playButton*** определяет то, какой исполняемый файл будет запускаться по кнопке "Играть" (если не указано поле ***label***, то это будет стандартный заголовок кнопки). Значением может быть путь до `.exe` или `.lnk` файла. От расширения файла зависит, какие  аргументы запуска можно передать. Если для запуска игры не требуется каких-либо особых условий, то нет принципиального значения, какой файл для запуска будет указан. Однако в более сложных случаях возможностей запуска через ярлык может быть недостаточно ввиду его ограничений. Основное - это сохранение пути в поле "Объект" в свойствах ярлыка. Если он был прописан, то он всегда будет таким, как при создании, и если у пользователя игра будет установлена на другой диск, то будет ошибка. Поэтому в данном случае следует указывать путь до `.exe` файла, а параметры запуска передавать через поле ***args***.

Рассмотрим на примере Mod Organizer 1. При его использовании игру следует запускать через него, иначе игра не увидит установленные плагины. Для облегчения запуска игры и приложений, работающих с модами, в МО можно создать ярлыки. Ярлык для запуска игры будет выглядеть следующим образом
